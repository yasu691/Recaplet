## 09:18 Netlify から GitHub Pages へデプロイ先を移行

- 概要: デプロイ回数上限を回避するため、Netlify から GitHub Pages へ移行
- 詳細:
  - 問題: Netlify 無料枠は月300回まで。毎時更新で720回/月となり上限超過
  - 解決策: GitHub Pages へ移行(デプロイ回数無制限)
  - 実装内容:
    - `.github/workflows/deploy-gh-pages.yml` を新規作成
      - RSS更新 → ビルド → GitHub Pagesデプロイを1つのワークフローに統合
      - `actions/deploy-pages` を使用
    - `.github/workflows/update-feeds.yml` から Netlify Build Hook 部分を削除
    - `netlify.toml` を削除
- 次のアクション: GitHub リポジトリで Pages 設定を有効化し、動作確認

## 00:09 ワークフローの競合を解決

- 概要: 2つのワークフローが同時実行され競合が発生したため、重複するワークフローを削除
- 詳細:
  - 問題: `update-feeds.yml` と `deploy-gh-pages.yml` が両方とも毎時実行され、同じファイルを更新しようとして rebase で競合
  - 解決策: `update-feeds.yml` を削除し、`deploy-gh-pages.yml` に一本化
  - 理由: `deploy-gh-pages.yml` がフィード更新・ビルド・デプロイの全工程を実行するため、`update-feeds.yml` は不要
- 次のアクション: 変更をコミット&プッシュし、動作確認

## 13:52 GitHub Pages のベースパス設定を追加（第1回試行）

- 概要: デプロイは成功したが404エラーが発生したため、ベースパス設定を追加
- 詳細:
  - 問題: GitHub Pages の URL は `/Recaplet/` サブパスだが、ビルド時にルートパス `/` 前提になっていた
  - 解決策（不十分だった）:
    - `app.json` の `web` セクションに `bundler: "metro"` と `output: "static"` を追加
    - ワークフローのビルドステップに環境変数 `EXPO_PUBLIC_URL: /Recaplet` を設定
  - 結果: ビルドは成功したが、読み込み中のまま止まる問題が発生
- 次のアクション: Expo Router 用の正しい設定を調査

## 17:48 Expo Router のサブパス設定を修正（第2回試行）

- 概要: Expo Router でサブパスを正しく扱うための設定を追加
- 詳細:
  - 問題: `EXPO_PUBLIC_URL` だけでは Expo Router がサブパスを正しく認識できなかった
  - 解決策（不十分だった）:
    - `app.json` の `extra.router.origin` に完全な URL を設定: `https://yasu691.github.io/Recaplet`
    - ワークフローに `.nojekyll` ファイル作成ステップを追加（`_expo` ディレクトリを正しく扱うため）
    - 不要だった `EXPO_PUBLIC_URL` 環境変数を削除
  - 結果: `/_expo/static/js/...` を探すが、正しくは `/Recaplet/_expo/static/js/...` であるべき
- 次のアクション: Metro bundler の publicPath 設定を追加

## 22:08 Metro Config でベースパス設定を追加

- 概要: Metro bundler の publicPath を設定してサブパスを正しく扱う
- 詳細:
  - 問題: ビルド時に生成される静的アセットのパスがルートパス前提だった
  - 解決策:
    - `metro.config.js` を新規作成
    - `EXPO_BASE_URL` 環境変数を使って `publicPath` を動的に設定
    - ワークフローに `EXPO_BASE_URL: /Recaplet` を追加
  - 参考: Metro の `publicPath` はビルド時の静的アセットのベースパスを指定する
- 次のアクション: 変更をコミット&プッシュし、再デプロイして動作確認

## 22:15 ワークフローの実行間隔を変更

- 概要: 実行頻度を抑えるため、8時間おきに変更
- 詳細:
  - 変更前: `0 * * * *`（毎時0分 = 24回/日）
  - 変更後: `0 */8 * * *`（8時間おき = 3回/日、0時・8時・16時）
  - 理由: フィード更新頻度を抑え、GitHub Actions の実行時間を削減
- 次のアクション: 変更をコミット&プッシュ

## 22:58 HTML内のパスを sed で修正するステップを追加

- 概要: Metro Config が反映されなかったため、ビルド後に HTML を直接修正する方式に変更
- 詳細:
  - 問題: Expo 54 では Metro の `publicPath` 設定が HTML に反映されない
  - HTMLに出力されたパス: `/_expo/static/js/...`
  - 必要なパス: `/Recaplet/_expo/static/js/...`
  - 解決策: ビルド後に `sed` コマンドで HTML 内のパスを一括置換
    - `/_expo/` → `/Recaplet/_expo/`
    - `/favicon.ico` → `/Recaplet/favicon.ico`
  - `metro.config.js` と `EXPO_BASE_URL` 環境変数は削除（不要になった）
- 結果: JavaScript は読み込めたが「Unmatched Route」エラー
- 次のアクション: `<base>` タグを追加してルーティングを修正

## 21:32 `<base>` タグを追加してルーティング問題に対応

- 概要: Expo Router がサブパスを認識できず「Unmatched Route」エラーが発生
- 詳細:
  - 問題: JavaScript は正しく読み込まれたが、Expo Router がルートを解決できない
  - エラー内容: 「Page could not be found」「Unmatched Route」
  - 原因: Expo Router がルートパス（`/`）前提でルーティング解決を行っている
  - 解決策: HTML の `<head>` タグ直後に `<base href="/Recaplet/">` を追加
    - すべての相対パスがこのベースパスを基準に解決される
    - Expo Router のルーティングもベースパスを認識できるようになる（期待）
- 次のアクション: 変更をコミット&プッシュし、再デプロイして動作確認
